import e from"axios";let t="https://npm-stat.com/api/download-counts",a=new Date,l=a.toISOString().slice(0,10);a.setFullYear(a.getFullYear()-1);let n=a.toISOString().slice(0,10),r={username:"",until:l,from:n,exclude:[]};function o(a){let l={...r,...a},{username:n,from:o,until:u,exclude:c}=l,s=`${t}?author=${n}&from=${o}&until=${u}`;return e.get(s).then(e=>{e=e.data;let t=[];Object.keys(e).forEach(a=>{if(!c.includes(a)){let l=Object.values(e[a]).reduce((e,t)=>e+t,0);t.push({name:a,downloads:l})}});let a=t.reduce((e,t)=>e+t.downloads,0);return{packages:t,total:a}})}function u(a,r,o){r||(r=n),o||(o=l);let u=`${t}?package=${a}&from=${r}&until=${o}`;return e.get(u).then(e=>{e=e.data;let t=Object.values(e[a]).reduce((e,t)=>e+t,0);return{package:a,downloads:t}})}export{o as getAll,u as getOne};
